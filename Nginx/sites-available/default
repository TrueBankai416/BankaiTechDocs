#  End of PHP FPM Nginx config example
server {
    listen 80 default_server;
    listen [::]:80 default_server;

    #   SSL configuration
    #  
    #   listen 443 ssl default_server;
    #   listen [::]:443 ssl default_server;
    #  
    #   Note: You should disable gzip for SSL traffic.
    #   See: https://bugs.debian.org/773332
    #  
    #   Read up on ssl_ciphers to ensure a secure configuration.
    #   See: https://bugs.debian.org/765782
    #  
    #   Self signed certs generated by the ssl-cert package
    #   Don't use them in a production server!
    #  
    #   include snippets/snakeoil.conf;
    root /var/www/html;
    #   Add index.php to the list if you are using PHP
    index index.php index.html index.htm index.nginx-debian.html;
    server_name _;
    location / {
        # First attempt to serve request as file, then
        # as directory, then fall back to displaying a 404.
        try_files $uri $uri/ =404;
        auth_basic "Restricted Content";
        auth_basic_user_file /etc/nginx/.htpasswd;
    }
    #  pass PHP scripts on Nginx to FastCGI (PHP-FPM) server
    location ~ \.php$ {
        include snippets/fastcgi-php.conf;
        # Nginx php-fpm sock config:
        fastcgi_pass unix:/run/php/php8.1-fpm.sock;
    }
    #  Nginx php-cgi config :
    #  Nginx PHP fastcgi_pass 127.0.0.1:9000;
    #  deny access to Apache .htaccess on Nginx with PHP, 
    #  if Apache and Nginx document roots concur
    location ~ /\.ht {
        deny all;
    }
}
#  End of PHP FPM Nginx config example
server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    #   SSL configuration
    #  
    #   listen 443 ssl default_server;
    #   listen [::]:443 ssl default_server;
    #  
    #   Note: You should disable gzip for SSL traffic.
    #   See: https://bugs.debian.org/773332
    #  
    #   Read up on ssl_ciphers to ensure a secure configuration.
    #   See: https://bugs.debian.org/765782
    #  
    #   Self signed certs generated by the ssl-cert package
    #   Don't use them in a production server!
    #  
    #   include snippets/snakeoil.conf;
    root /var/www/html;
    #   Add index.php to the list if you are using PHP
    index index.php index.html index.htm index.nginx-debian.html;
    server_name _;
    ssl_certificate /etc/nginx/SSL/fullchain.pem;
    ssl_certificate_key /etc/nginx/SSL/privkey.pem;
    location / {
        # First attempt to serve request as file, then
        # as directory, then fall back to displaying a 404.
        try_files $uri $uri/ =404;
    }
    #  pass PHP scripts on Nginx to FastCGI (PHP-FPM) server
    location ~ \.php$ {
        include snippets/fastcgi-php.conf;
        # Nginx php-fpm sock config:
        fastcgi_pass unix:/run/php/php8.1-fpm.sock;
    }
    #  Nginx php-cgi config :
    #  Nginx PHP fastcgi_pass 127.0.0.1:9000;
    #  deny access to Apache .htaccess on Nginx with PHP, 
    #  if Apache and Nginx document roots concur
    location ~ /\.ht {
        deny all;
    }
}