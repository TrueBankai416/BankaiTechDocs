---
title: Ενσωμάτωση σχολίων
description: Πλήρης οδηγός για την ενσωμάτωση σχολίων αμφίδρομου Discord με το Docusaurus, συμπεριλαμβανομένης της εγκατάστασης, της διαμόρφωσης και της αντιμετώπισης προβλημάτων.
image: /img/social/discord-social.jpg
sidebar_position: 2
---

# Ενσωμάτωση σχολίων Discord

Αυτός ο ιστότοπος τεκμηρίωσης περιλαμβάνει μια **ενσωμάτωση σχολίων Discord αμφίδρομης επικοινωνίας** που επιτρέπει στους επισκέπτες να στέλνουν σχόλια στον διακομιστή Discord ΚΑΙ εμφανίζει τις απαντήσεις Discord πίσω στον ιστότοπο μαζί με τα υπάρχοντα σχόλια Giscus που βασίζονται στο GitHub.

## Χαρακτηριστικά

* **Αμφίδρομη Επικοινωνία**: Σχόλια ιστότοπου → Discord, απαντήσεις Discord → Ιστότοπος
* **Σύστημα διπλών σχολίων**: Τόσο τα σχόλια Giscus (βασισμένα στο GitHub) όσο και τα σχόλια Discord λειτουργούν μαζί
* **Ενσωματώσεις Rich Discord**: Τα σχόλια εμφανίζονται ως μορφοποιημένες ενσωματώσεις με πλήρες περιεχόμενο σελίδας
* **Διαχείριση νημάτων**: Αυτόματη δημιουργία νημάτων για οργανωμένες απαντήσεις
* **Ενημερώσεις σε πραγματικό χρόνο**: Ο ιστότοπος εμφανίζει αυτόματα τις απαντήσεις του Discord
* **Πληροφορίες πλήρους σελίδας**: Τα σχόλια περιλαμβάνουν τον τίτλο σελίδας, τη διεύθυνση URL και το περιεχόμενο πλοήγησης
* **Άβαταρ χρηστών**: Οι απαντήσεις του Discord εμφανίζουν τα άβαταρ και τα ονόματα χρήστη των χρηστών
* **Responsive Design**: Λειτουργεί τόσο σε επιτραπέζιους υπολογιστές όσο και σε κινητές συσκευές

## Οδηγίες εγκατάστασης

### 1. Δημιουργήστε ένα Discord Bot

1. Μεταβείτε στην [Πύλη Προγραμματιστών Discord](https://discord.com/developers/applications)
2. Δημιουργήστε μια νέα εφαρμογή
3. Μεταβείτε στην ενότητα "Bot" και δημιουργήστε ένα bot
4. Αντιγράψτε το διακριτικό bot
5. Στην ενότητα "Προθέσεις Προνομιακής Πύλης", ενεργοποιήστε:
   * **Πρόθεση περιεχομένου μηνύματος**
   * **Πρόθεση μελών διακομιστή** (προαιρετικό)

### 2) Ρύθμιση παραμέτρων δικαιωμάτων bot

Το bot σας χρειάζεται τα εξής δικαιώματα:

* Ανάγνωση μηνυμάτων
* Αποστολή μηνυμάτων
* Δημιουργία δημόσιων νημάτων
* Αποστολή μηνυμάτων σε νήματα
* Ανάγνωση ιστορικού μηνυμάτων
* Χρήση εντολών Slash (προαιρετικά)

### 3. Πρόσκληση Bot στον διακομιστή

1. Μεταβείτε στο OAuth2 > Γεννήτρια URL
2. Επιλέξτε το πεδίο εφαρμογής "bot"
3. Επιλέξτε τα δικαιώματα που αναφέρονται παραπάνω
4. Χρησιμοποιήστε τη δημιουργημένη διεύθυνση URL για να προσκαλέσετε το bot στον διακομιστή σας

### 4) Ρύθμιση παραμέτρων μεταβλητών περιβάλλοντος

#### Frontend (.env)

```env
# Διαμόρφωση Bot Discord
DISCORD_BOT_TOKEN=το_bot_your_token_here
DISCORD_CHANNEL_ID=το_κανάλι_your_id_here

# Διαμόρφωση API
REACT_APP_API_URL=http://localhost:3001

# Διαμόρφωση περιβάλλοντος Discord
DISCORD_CONTEXT_LEVEL=πλήρες
DISCORD_SHOW_BREADCRUMBS=true
DISCORD_SHOW_SECTION_INFO=true
DISCORD_SITE_NAME=Το όνομα του ιστότοπού σας
```

#### Διακομιστής παρασκηνίου (διακομιστής/.env)

```env
# Διαμόρφωση Bot Discord
DISCORD_BOT_TOKEN=το_bot_your_token_here
DISCORD_CHANNEL_ID=το_κανάλι_your_id_here

# Διαμόρφωση API
PORT=3001

# Διαμόρφωση περιβάλλοντος Discord
DISCORD_CONTEXT_LEVEL=πλήρες
DISCORD_SHOW_PAGE_CONTEXT=αληθές
DISCORD_SHOW_BREADCRUMBS=αληθές
DISCORD_SHOW_SECTION_INFO=αληθές
DISCORD_SHOW_PAGE_PATH=ψευδές
DISCORD_SHOW_TIMESTAMP=true
DISCORD_SHOW_AUTHOR_FIELD=true
DISCORD_CREATE_THREADS=true
DISCORD_THREAD_DURATION=1440
DISCORD_SITE_NAME=Το όνομα του ιστότοπού σας
```

:::προειδοποίηση Σημείωση ασφαλείας

* Ποτέ μην υποβάλλετε αρχεία `.env` στον έλεγχο έκδοσης
* Χρήση μεταβλητών περιβάλλοντος στην παραγωγή
* Διατηρήστε ασφαλές το διακριτικό bot σας
  :::

### 5. Εγκατάσταση εξαρτήσεων διακομιστή

```bash
cd server
npm install
```

### 6. Έναρξη του διακομιστή Backend

```bash
# Ανάπτυξη
εκτέλεση npm ανάπτυξη

# Παραγωγή
έναρξη npm
```

### 7. Ανάπτυξη διαμόρφωσης

Για αναπτύξεις παραγωγής, ορίστε μεταβλητές περιβάλλοντος στην πλατφόρμα φιλοξενίας σας:

* **Frontend**: Ορίστε το `REACT_APP_API_URL` στη διεύθυνση URL του API παραγωγής σας
* **Backend**: Αναπτύξτε τον φάκελο διακομιστή με το διακριτικό bot και το αναγνωριστικό καναλιού
* **Βάση δεδομένων**: Η βάση δεδομένων SQLite θα δημιουργηθεί αυτόματα
* **Πλαίσιο**: Διαμορφώστε το επίπεδο περιβάλλοντος και τις επιλογές του Discord σύμφωνα με τις προτιμήσεις σας

## Πώς λειτουργεί

### Πλήρης αμφίδρομη ροή

1. **Σχόλιο ιστότοπου**: Ο χρήστης υποβάλλει σχόλιο μέσω της φόρμας ιστότοπου
2. **Μήνυμα Discord**: Το bot στέλνει μορφοποιημένη ενσωμάτωση στο κανάλι Discord με πλήρες περιεχόμενο σελίδας
3. **Δημιουργία νήματος**: Το bot δημιουργεί αυτόματα ένα νήμα για οργανωμένες απαντήσεις
4. **Απαντήσεις Discord**: Οι χρήστες του Discord απαντούν στο νήμα ή στο μήνυμα
5. **Αποθήκευση βάσης δεδομένων**: Το bot αποθηκεύει όλα τα σχόλια και τις απαντήσεις στη βάση δεδομένων SQLite
6. **Εμφάνιση Ιστοτόπου**: Το Frontend κάνει δημοσκοπήσεις στο API κάθε 30 δευτερόλεπτα και εμφανίζει απαντήσεις στο Discord

### Μορφή μηνύματος Discord

Οι ενσωματώσεις του Discord περιλαμβάνουν:

* **Title**: "💬 New Comment: \{Page Title}"
* **Περιγραφή**: Το πραγματικό περιεχόμενο του σχολίου
* **Συγγραφέας**: Το όνομα του σχολιαστή
* **URL**: Σύνδεσμος με δυνατότητα κλικ προς την ακριβή σελίδα
* **Πεδίο Σελίδας**: Εμφανίζει τον τίτλο σελίδας με σύνδεσμο με δυνατότητα κλικ
* **Χρονική σήμανση**: Πότε δημοσιεύτηκε το σχόλιο
* **Νήμα**: Αυτόματα δημιουργημένο νήμα για απαντήσεις

### Εμφάνιση ιστότοπου

Ο ιστότοπος δείχνει:

* **Πρωτότυπα σχόλια**: Υποβολές φόρμας ιστότοπου
* **Απαντήσεις στο Discord**: Απαντήσεις από χρήστες του Discord με avatar και ονόματα χρήστη
* **Ενημερώσεις σε πραγματικό χρόνο**: Αυτόματη δημοσκόπηση για νέες απαντήσεις
* **Συζητήσεις σε νήματα**: Οργανωμένο σχόλιο → δομή απάντησης

## Διαμόρφωση περιβάλλοντος

### Επίπεδα περιβάλλοντος

Ρυθμίστε πόσο θα εμφανίζεται το περιεχόμενο στα μηνύματα του Discord:

#### `DISCORD_CONTEXT_LEVEL=ελάχιστο`

* **Εμφανίζεται**: Μόνο τίτλος σελίδας και περιεχόμενο σχολίου
* **Περίπτωση χρήσης**: Καθαρά, απλά μηνύματα χωρίς επιπλέον περιεχόμενο

#### `DISCORD_CONTEXT_LEVEL=βασικό`

* **Εμφανίζεται**: Τίτλος σελίδας, περιεχόμενο σχολίου και διεύθυνση URL σελίδας με δυνατότητα κλικ
* **Περίπτωση χρήσης**: Μέτριο περιεχόμενο με βασικές πληροφορίες

#### `DISCORD_CONTEXT_LEVEL=πλήρες` (προεπιλογή)

* **Εμφανίσεις**: Όλες οι πληροφορίες περιβάλλοντος, συμπεριλαμβανομένων των breadcrumbs, των ενοτήτων, των χρονικών σημάνσεων
* **Περίπτωση χρήσης**: Μέγιστο πλαίσιο για λεπτομερείς συζητήσεις

#### `DISCORD_CONTEXT_LEVEL=προσαρμοσμένο`

* **Εμφανίζει**: Μόνο τα στοιχεία περιβάλλοντος που ενεργοποιείτε ξεχωριστά
* **Περίπτωση χρήσης**: Βελτιωμένος έλεγχος του τι εμφανίζεται

### Μεμονωμένα στοιχεία ελέγχου περιβάλλοντος

Όταν χρησιμοποιείτε το `DISCORD_CONTEXT_LEVEL=custom`, μπορείτε να ελέγξετε κάθε στοιχείο:

```env
DISCORD_SHOW_PAGE_CONTEXT=true # Εμφάνιση τίτλου σελίδας και πεδίου URL
DISCORD_SHOW_BREADCRUMBS=true # Εμφάνιση ψίχουλων πλοήγησης
DISCORD_SHOW_SECTION_INFO=true # Εμφάνιση κύριας ενότητας (Docker, Nextcloud, κ.λπ.)
DISCORD_SHOW_PAGE_PATH=false # Εμφάνιση πλήρους διαδρομής URL
DISCORD_SHOW_TIMESTAMP=true # Εμφάνιση πότε δημοσιεύτηκε το σχόλιο
DISCORD_SHOW_AUTHOR_FIELD=true # Εμφάνιση ονόματος σχολιαστή ως συντάκτη ενσωμάτωσης
```

### Ρύθμιση παραμέτρων νήματος

```env
DISCORD_CREATE_THREADS=true # Δημιουργία νημάτων για απαντήσεις
DISCORD_THREAD_DURATION=1440 # Χρόνος αυτόματης αρχειοθέτησης νήματος (λεπτά)
DISCORD_SITE_NAME=Το όνομα του ιστότοπού σας # Το όνομα του ιστότοπου στο υποσέλιδο
```

### Παράδειγμα Εξόδων Περιβάλλοντος

**Ελάχιστο Πλαίσιο:**

```
Οδηγός εγκατάστασης Docker
"Αυτό το σεμινάριο ήταν πραγματικά χρήσιμο! Πώς χειρίζομαι τις διενέξεις θυρών;"
```

**Βασικό Πλαίσιο:**

```
💬 Οδηγός εγκατάστασης Docker
"Αυτό το σεμινάριο ήταν πραγματικά χρήσιμο! Πώς χειρίζομαι τις διενέξεις θυρών;"
[Σύνδεσμος προς τη σελίδα]
```

**Πλήρες περιεχόμενο:**

```
💬 Νέο σχόλιο: Οδηγός εγκατάστασης Docker
👤 John Doe
"Αυτό το σεμινάριο ήταν πραγματικά χρήσιμο! Πώς χειρίζομαι τις διενέξεις θυρών;"

📄 Σελίδα: Οδηγός εγκατάστασης Docker
📍 Πλοήγηση: Docker > Έγγραφα > Εγκατάσταση Docker
📂 Ενότητα: Docker
🔗 Διαδρομή: /Docker/Docs/Εγκατάσταση%20Docker/Docker%20Engine

Το όνομα του ιστότοπού σας • Σύστημα σχολίων
```

## Προσαρμογή

### Στυλ

Το στοιχείο σχολίων του Discord χρησιμοποιεί ενότητες CSS. Μπορείτε να προσαρμόσετε την εμφάνιση τροποποιώντας:

```
src/components/DiscordComments/styles.module.css
```

### Μορφή μηνύματος

Για να προσαρμόσετε τη μορφή ενσωμάτωσης του Discord, επεξεργαστείτε το αντικείμενο `discordMessage` στο:

```
src/components/DiscordComments/index.tsx
```

### Τοποθέτηση Στοιχείων

Τα σχόλια του Discord εμφανίζονται από προεπιλογή κάτω από τα σχόλια του Giscus. Για να το αλλάξετε αυτό, τροποποιήστε:

```
src/theme/DocItem/Layout/index.js
```

## Αντιμετώπιση προβλημάτων

### Το bot δεν ανταποκρίνεται

1. **Έλεγχος διακριτικού bot**: Βεβαιωθείτε ότι το `DISCORD_BOT_TOKEN` είναι σωστό
2. **Επαλήθευση δικαιωμάτων**: Βεβαιωθείτε ότι το bot έχει τα απαιτούμενα δικαιώματα στο κανάλι
3. **Έλεγχος ID καναλιού**: Βεβαιωθείτε ότι το `DISCORD_CHANNEL_ID` είναι σωστό
4. **Bot στον διακομιστή**: Επαληθεύστε ότι το bot βρίσκεται όντως στον διακομιστή Discord σας

### Τα σχόλια δεν εμφανίζονται

1. **Εκτελείται διακομιστής**: Ελέγξτε εάν ο διακομιστής backend εκτελείται στη σωστή θύρα
2. **URL API**: Επαληθεύστε ότι το `REACT_APP_API_URL` παραπέμπει στον διακομιστή backend σας
3. **Βάση δεδομένων**: Ελέγξτε εάν δημιουργείται βάση δεδομένων SQLite στον φάκελο του διακομιστή
4. **CORS**: Βεβαιωθείτε ότι το CORS έχει διαμορφωθεί για τον τομέα frontend σας

### Απαντήσεις στο Discord που δεν εμφανίζονται

1. **Πρόθεση περιεχομένου μηνύματος**: Βεβαιωθείτε ότι αυτό είναι ενεργοποιημένο στην Πύλη προγραμματιστών του Discord
2. **Δικαιώματα bot**: Επαληθεύστε ότι το bot μπορεί να διαβάσει μηνύματα στο κανάλι
3. **Σύνδεση βάσης δεδομένων**: Ελέγξτε τα αρχεία καταγραφής διακομιστή για σφάλματα βάσης δεδομένων
4. **Δημοσκοπήσεις**: Δημοσκοπήσεις στο frontend κάθε 30 δευτερόλεπτα - οι απαντήσεις ενδέχεται να χρειαστούν χρόνο για να εμφανιστούν

### Οι μεταβλητές περιβάλλοντος δεν λειτουργούν

* **Ανάπτυξη**: Επανεκκινήστε τόσο τους διακομιστές frontend όσο και τους διακομιστές backend
* **Παραγωγή**: Αναδιάταξη τόσο του frontend όσο και του backend με τις σωστές μεταβλητές περιβάλλοντος
* **Πρόθεμα**: Χρησιμοποιήστε το πρόθεμα `REACT_APP_` μόνο για μεταβλητές frontend

### Προβλήματα βάσης δεδομένων

1. **Δικαιώματα αρχείων**: Βεβαιωθείτε ότι ο διακομιστής μπορεί να γράψει στον κατάλογο της βάσης δεδομένων
2. **Χώρος στο δίσκο**: Ελέγξτε τον διαθέσιμο χώρο στο δίσκο για τη βάση δεδομένων SQLite
3. **Αρχεία καταγραφής διακομιστή**: Ελέγξτε την κονσόλα διακομιστή για σφάλματα σύνδεσης βάσης δεδομένων

## Ζητήματα ασφαλείας

* **Bot Token**: Κρατήστε μυστικό το bot token σας και μην το δεσμεύετε ποτέ σε έλεγχο έκδοσης
* **Περιορισμός Ρυθμού**: Το Discord έχει όρια ρυθμού για bots (διαφορετικά από τα webhooks)
* **Επικύρωση Εισόδου**: Τόσο το frontend όσο και το backend επικυρώνουν την είσοδο χρήστη
* **Ασφάλεια βάσης δεδομένων**: Η βάση δεδομένων SQLite θα πρέπει να προστατεύεται με τα κατάλληλα δικαιώματα αρχείων
* **Ασφάλεια API**: Εξετάστε το ενδεχόμενο εφαρμογής περιορισμού ρυθμού στα τελικά σημεία του API σας
* **CORS**: Διαμορφώστε σωστά το CORS για τον τομέα παραγωγής σας

## Αρχιτεκτονική

```
Frontend ιστότοπου ←→ Express API ←→ Discord Bot ←→ Διακομιστής Discord
                    ↓
                Βάση δεδομένων SQLite
```

## Δομή αρχείου

```
project/
├── src/components/DiscordComments/ # Στοιχείο frontend
├── server/ # Server backend
│ ├── api.js # Express API server
│ ├── discord-bot.js # Λογική bot Discord
│ ├── database.js # Συναρτήσεις βάσης δεδομένων SQLite
│ └── package.json # Εξαρτήσεις διακομιστή
└── docs/Discord/Docs/ # Τεκμηρίωση
```

## Υποστήριξη προγράμματος περιήγησης

Το στοιχείο σχολίων του Discord λειτουργεί σε όλα τα σύγχρονα προγράμματα περιήγησης που υποστηρίζουν:

* API ανάκτησης ES6
* Αντιδράστε 18+
* Πλέγμα CSS και Flexbox
* Τοπική αποθήκευση (για διατήρηση φόρμας)
