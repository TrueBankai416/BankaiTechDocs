---
title: Integrare comentarii
description: Ghid complet pentru integrarea comentariilor bidirecÈ›ionale Discord cu Docusaurus, inclusiv instalare, configurare È™i depanare.
image: /img/social/discord-social.jpg
sidebar_position: 2
---

# Integrarea comentariilor pe Discord

This documentation site includes a **bidirectional Discord comments integration** that allows visitors to send comments to your Discord server AND displays Discord replies back on the website alongside the existing GitHub-based Giscus comments.

## Caracteristici

- **Comunicare bidirecÈ›ionalÄƒ**: Comentarii pe site â†’ Discord, rÄƒspunsuri pe Discord â†’ Site web
- **Sistem dublu de comentarii**: AtÃ¢t comentariile Giscus (bazate pe GitHub), cÃ¢t È™i cele Discord funcÈ›ioneazÄƒ Ã®mpreunÄƒ
- **ÃncorporÄƒri Discord Ã®mbogÄƒÈ›ite**: Comentariile apar ca Ã®ncorporÄƒri formatate cu context pe Ã®ntreaga paginÄƒ
- **Gestionarea firelor de discuÈ›ie**: Creare automatÄƒ a firelor de discuÈ›ie pentru rÄƒspunsuri organizate
- **ActualizÄƒri Ã®n timp real**: Site-ul web afiÈ™eazÄƒ automat rÄƒspunsurile pe Discord
- **Context paginÄƒ completÄƒ**: Comentariile includ titlul paginii, adresa URL È™i contextul de navigare
- **Avatare utilizatori**: RÄƒspunsurile de pe Discord afiÈ™eazÄƒ avatarele È™i numele de utilizator ale utilizatorilor
- **Design responsiv**: FuncÈ›ioneazÄƒ atÃ¢t pe desktop, cÃ¢t È™i pe dispozitive mobile

## InstrucÈ›iuni de configurare

### 1. Create a Discord Bot

1. AccesaÈ›i [Portalul dezvoltatorilor Discord](https://discord.com/developers/applications)
2. CreaÈ›i o aplicaÈ›ie nouÄƒ
3. AccesaÈ›i secÈ›iunea â€Botâ€ È™i creaÈ›i un bot
4. CopiaÈ›i tokenul botului
5. Sub â€IntenÈ›ii gateway privilegiateâ€, activaÈ›i:
   - **IntenÈ›ia conÈ›inutului mesajului**
   - **IntenÈ›ia membrilor serverului** (opÈ›ional)

### 2. Configure Bot Permissions

Botul tÄƒu are nevoie de aceste permisiuni:

- CitiÈ›i mesajele
- Trimite mesaje
- CreaÈ›i fire de discuÈ›ie publice
- Trimite mesaje Ã®n fire de discuÈ›ie
- CitiÈ›i istoricul mesajelor
- Utilizarea comenzilor Slash (opÈ›ional)

### 3. Invite Bot to Server

1. AccesaÈ›i OAuth2 > Generator de URL-uri
2. SelectaÈ›i domeniul de aplicare â€botâ€
3. SelectaÈ›i permisiunile enumerate mai sus
4. FoloseÈ™te adresa URL generatÄƒ pentru a invita botul pe serverul tÄƒu

### 4. Configure Environment Variables

#### Frontend (.env)

```env
# Configurare bot Discord
DISCORD_BOT_TOKEN=jetonul_vostru_bot_aici
DISCORD_CHANNEL_ID=id-ul_vostru_canalului_aici

# Configurare API
REACT_APP_API_URL=http://localhost:3001

# Configurare context Discord
DISCORD_CONTEXT_LEVEL=full
DISCORD_SHOW_BREADCRUMBS=true
DISCORD_SHOW_SECTION_INFO=true
DISCORD_SITE_NAME=Numele site-ului dvs.
```

#### Server backend (server/.env)

```env
# ConfiguraÈ›ie bot Discord
DISCORD_BOT_TOKEN=jetonul_botului_acesteia
DISCORD_CHANNEL_ID=id-ul_canalului_acesteia

# ConfiguraÈ›ie API
PORT=3001

# ConfiguraÈ›ie context Discord
DISCORD_CONTEXT_LEVEL=full
DISCORD_SHOW_PAGE_CONTEXT=true
DISCORD_SHOW_BREADCRUMBS=true
DISCORD_SHOW_SECTION_INFO=true
DISCORD_SHOW_PAGE_PATH=false
DISCORD_SHOW_TIMESTAMP=adevÄƒrat
DISCORD_SHOW_AUTHOR_FIELD=adevÄƒrat
DISCORD_CREATE_THREADS=adevÄƒrat
DISCORD_THREAD_DURATION=1440
DISCORD_SITE_NAME=Numele site-ului dvs.
```

:::avertisment NotÄƒ de securitate

- Nu comite niciodatÄƒ fiÈ™iere `.env` cÄƒtre controlul versiunilor
- Utilizarea variabilelor de mediu Ã®n producÈ›ie
- PÄƒstreazÄƒ-È›i token-ul botului Ã®n siguranÈ›Äƒ
  :::

### 5. Install Server Dependencies

```bash
Instalare server cd
npm
```

### 6. Start the Backend Server

```bash
# Dezvoltare
npm run dev

# ProducÈ›ie
npm start
```

### 7. Deploy Configuration

Pentru implementÄƒrile de producÈ›ie, setaÈ›i variabilele de mediu Ã®n platforma de gÄƒzduire:

- **Frontend**: SetaÈ›i `REACT_APP_API_URL` la adresa URL a API-ului de producÈ›ie
- **Backend**: ImplementeazÄƒ folderul serverului cu tokenul botului È™i ID-ul canalului
- **BazÄƒ de date**: Baza de date SQLite va fi creatÄƒ automat
- **Context**: ConfiguraÈ›i nivelul de context È™i opÈ›iunile Discord conform preferinÈ›elor dvs.

## Cum funcÈ›ioneazÄƒ

### Flux bidirecÈ›ional complet

1. **Comentariu pe site**: Utilizatorul trimite comentariul prin intermediul formularului de pe site
2. **Mesaj Discord**: Botul trimite un mesaj embed formatat cÄƒtre canalul Discord cu contextul paginii complete
3. **Creare fir de discuÈ›ie**: Botul creeazÄƒ automat un fir de discuÈ›ie pentru rÄƒspunsuri organizate
4. **RÄƒspunsuri Discord**: Utilizatorii Discord rÄƒspund Ã®n firul de discuÈ›ie sau la mesaj
5. **Stocare Ã®n baza de date**: Botul stocheazÄƒ toate comentariile È™i rÄƒspunsurile Ã®n baza de date SQLite
6. **AfiÈ™aj site web**: Frontend-ul verificÄƒ API-ul la fiecare 30 de secunde È™i afiÈ™eazÄƒ rÄƒspunsurile Discord

### Formatul mesajului Discord

ÃncorporÄƒrile Discord includ:

- **Title**: "ğŸ’¬ New Comment: \{Page Title}"
- **Descriere**: ConÈ›inutul propriu-zis al comentariului
- **Autor**: Numele comentatorului
- **URL**: Link cÄƒtre pagina exactÄƒ pe care se poate da clic
- **CÃ¢mp PaginÄƒ**: AfiÈ™eazÄƒ titlul paginii cu un link pe care se poate da clic
- **MarcÄƒ temporalÄƒ**: CÃ¢nd a fost postat comentariul
- **Fir de discuÈ›ie**: Fir de discuÈ›ie creat automat pentru rÄƒspunsuri

### AfiÈ™ajul site-ului web

Site-ul web aratÄƒ:

- **Comentarii originale**: Trimiteri de formulare pe site
- **RÄƒspunsuri Discord**: RÄƒspunsuri de la utilizatori Discord cu avatare È™i nume de utilizator
- **ActualizÄƒri Ã®n timp real**: Sondare automatÄƒ pentru rÄƒspunsuri noi
- **ConversaÈ›ii organizate**: Structura comentariilor â†’ rÄƒspunsurilor organizate

## Configurarea contextului

### Niveluri de context

ConfiguraÈ›i cÃ¢t context apare Ã®n mesajele Discord:

#### `DISCORD_CONTEXT_LEVEL=minimal`

- **Emisiuni**: Doar titlul paginii È™i conÈ›inutul comentariilor
- **Scaz de utilizare**: Mesaje clare, simple, fÄƒrÄƒ context suplimentar

#### `DISCORD_CONTEXT_LEVEL=de bazÄƒ`

- **AfiÈ™eazÄƒ**: Titlul paginii, conÈ›inutul comentariilor È™i adresa URL a paginii pe care se poate da clic
- **Caz de utilizare**: Context moderat cu informaÈ›ii esenÈ›iale

#### `DISCORD_CONTEXT_LEVEL=full` (implicit)

- **AfiÈ™eazÄƒ**: Toate informaÈ›iile contextuale, inclusiv breadcrumb-uri, secÈ›iuni, timestamp-uri
- **Caz de utilizare**: Context maxim pentru discuÈ›ii detaliate

#### `DISCORD_CONTEXT_LEVEL=personalizat`

- **AfiÈ™eazÄƒ**: Doar elementele de context pe care le activaÈ›i individual
- **Caz de utilizare**: Control fin asupra a ceea ce apare

### Controale individuale de context

CÃ¢nd foloseÈ™ti `DISCORD_CONTEXT_LEVEL=custom`, poÈ›i controla fiecare element:

```env
DISCORD_SHOW_PAGE_CONTEXT=true # AfiÈ™eazÄƒ titlul paginii È™i cÃ¢mpul URL
DISCORD_SHOW_BREADCRUMBS=true # AfiÈ™eazÄƒ breadcrumb-urile de navigare
DISCORD_SHOW_SECTION_INFO=true # AfiÈ™eazÄƒ secÈ›iunea principalÄƒ (Docker, Nextcloud etc.)
DISCORD_SHOW_PAGE_PATH=false # AfiÈ™eazÄƒ calea URL completÄƒ
DISCORD_SHOW_TIMESTAMP=true # AfiÈ™eazÄƒ cÃ¢nd a fost postat comentariul
DISCORD_SHOW_AUTHOR_FIELD=true # AfiÈ™eazÄƒ numele comentatorului ca autor al Ã®ncorporÄƒrii
```

### ConfiguraÈ›ia firului de execuÈ›ie

```env
DISCORD_CREATE_THREADS=true # CreeazÄƒ subiecte pentru rÄƒspunsuri
DISCORD_THREAD_DURATION=1440 # Timp de arhivare automatÄƒ a subiectului (minute)
DISCORD_SITE_NAME=Numele site-ului dvs. # Numele site-ului Ã®n subsol
```

### Exemple de ieÈ™iri contextuale

**Context minimal:**

```
Ghid de instalare Docker
â€Acest tutorial a fost foarte util! Cum gestionez conflictele de porturi?â€
```

**Context de bazÄƒ:**

```
ğŸ’¬ Ghid de instalare Docker
â€Acest tutorial a fost foarte util! Cum gestionez conflictele de porturi?â€
[Link cÄƒtre paginÄƒ]
```

**Context complet:**

```
ğŸ’¬ Comentariu nou: Ghid de instalare Docker
ğŸ‘¤ John Doe
â€Acest tutorial a fost foarte util! Cum gestionez conflictele de porturi?â€

ğŸ“„ PaginÄƒ: Ghid de instalare Docker
ğŸ“ Navigare: Docker > DocumentaÈ›ie > Instalarea Docker
ğŸ“‚ SecÈ›iune: Docker
ğŸ”— Cale: /Docker/Docs/Installing%20Docker/Docker%20Eengine

Numele site-ului dvs. â€¢ Sistem de comentarii
```

## Personalizare

### Stilizare

The Discord comments component uses CSS modules. You can customize the appearance by modifying:

```
src/components/DiscordComments/styles.module.css
```

### Formatul mesajului

Pentru a personaliza formatul de Ã®ncorporare Discord, editaÈ›i obiectul `discordMessage` Ã®n:

```
src/components/DiscordComments/index.tsx
```

### Plasarea componentelor

The Discord comments appear below the Giscus comments by default. To change this, modify:

```
src/theme/DocItem/Layout/index.js
```

## Depanare

### Botul nu rÄƒspunde

1. **VerificaÈ›i tokenul botului**: AsiguraÈ›i-vÄƒ cÄƒ `DISCORD_BOT_TOKEN` este corect
2. **VerificÄƒ permisiunile**: AsigurÄƒ-te cÄƒ botul are permisiunile necesare Ã®n canal
3. **VerificaÈ›i ID-ul canalului**: AsiguraÈ›i-vÄƒ cÄƒ `DISCORD_CHANNEL_ID` este corect
4. **Bot pe server**: VerificÄƒ dacÄƒ botul se aflÄƒ de fapt pe serverul tÄƒu Discord

### Comentariile nu apar

1. **Server ruleazÄƒ**: VerificaÈ›i dacÄƒ serverul backend ruleazÄƒ pe portul corect
2. **URL API**: VerificaÈ›i dacÄƒ `REACT_APP_API_URL` indicÄƒ cÄƒtre serverul backend.
3. **BazÄƒ de date**: VerificÄƒ dacÄƒ baza de date SQLite este creatÄƒ Ã®n folderul serverului
4. **CORS**: AsiguraÈ›i-vÄƒ cÄƒ CORS este configurat pentru domeniul frontend

### RÄƒspunsurile de pe Discord nu se afiÈ™eazÄƒ

1. **IntenÈ›ia conÈ›inutului mesajului**: AsiguraÈ›i-vÄƒ cÄƒ aceastÄƒ opÈ›iune este activatÄƒ Ã®n Portalul pentru dezvoltatori Discord
2. **Permisiuni bot**: VerificÄƒ dacÄƒ botul poate citi mesajele din canal
3. **Conexiune la baza de date**: VerificaÈ›i jurnalele serverului pentru erori Ã®n baza de date
4. **Sondaje**: Frontend-ul efectueazÄƒ sondaje la fiecare 30 de secunde - rÄƒspunsurile pot apÄƒrea Ã®n timp

### Variabilele de mediu nu funcÈ›ioneazÄƒ

- **Dezvoltare**: ReporniÈ›i serverele frontend È™i backend
- **ProducÈ›ie**: ReimplementaÈ›i atÃ¢t frontend-ul, cÃ¢t È™i backend-ul cu variabilele de mediu corecte
- **Prefix**: FolosiÈ›i prefixul `REACT_APP_` doar pentru variabilele frontend

### Probleme cu baza de date

1. **Permisiuni fiÈ™ier**: AsiguraÈ›i-vÄƒ cÄƒ serverul poate scrie Ã®n directorul bazei de date
2. **SpaÈ›iu pe disc**: VerificaÈ›i spaÈ›iul pe disc disponibil pentru baza de date SQLite
3. **Jurnale server**: VerificaÈ›i consola serverului pentru erori de conexiune la baza de date

## ConsideraÈ›ii de securitate

- **Jeton de bot**: PÄƒstraÈ›i secret jetonul de bot È™i nu-l trimiteÈ›i niciodatÄƒ cÄƒtre controlul versiunilor
- **Limitare de ratÄƒ**: Discord are limite de ratÄƒ pentru boÈ›i (diferite de webhook-uri)
- **Validarea datelor introduse**: AtÃ¢t frontend-ul, cÃ¢t È™i backend-ul valideazÄƒ datele introduse de utilizator
- **Securitatea bazei de date**: Baza de date SQLite trebuie protejatÄƒ cu permisiuni de fiÈ™iere corespunzÄƒtoare
- **Securitatea API**: LuaÈ›i Ã®n considerare implementarea limitÄƒrii ratei pe endpoint-urile API
- **CORS**: Configure CORS properly for your production domain

## ArhitecturÄƒ

```
Frontend site web â†â†’ API Express â†â†’ Bot Discord â†â†’ Server Discord
                    â†“
                BazÄƒ de date SQLite
```

## Structura fiÈ™ierelor

```
project/
â”œâ”€â”€ src/components/DiscordComments/ # ComponentÄƒ frontend
â”œâ”€â”€ server/ # Server backend
â”‚ â”œâ”€â”€ api.js # Server API Express
â”‚ â”œâ”€â”€ discord-bot.js # Logica botului Discord
â”‚ â”œâ”€â”€ database.js # FuncÈ›ii bazÄƒ de date SQLite
â”‚ â””â”€â”€ package.json # DependenÈ›e server
â””â”€â”€ docs/Discord/Docs/ # DocumentaÈ›ie
```

## Suport pentru browser

Componenta de comentarii Discord funcÈ›ioneazÄƒ Ã®n toate browserele moderne care acceptÄƒ:

- API-ul de preluare ES6
- ReacÈ›ioneazÄƒ 18+
- GrilÄƒ CSS È™i Flexbox
- Stocare localÄƒ (pentru persistenÈ›a formularului)
