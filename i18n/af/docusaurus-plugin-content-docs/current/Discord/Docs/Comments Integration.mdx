---
title: Kommentaar-integrasie
description: Volledige gids vir die integrasie van bidireksionele Discord-kommentaar met Docusaurus, insluitend opstelling, konfigurasie en probleemoplossing.
image: /img/social/discord-social.jpg
sidebar_position: 2
---

# Discord-kommentaarintegrasie

Hierdie dokumentasiewebwerf sluit 'n **tweerigting Discord-kommentaarintegrasie** in wat besoekers toelaat om kommentaar na jou Discord-bediener te stuur EN Discord-antwoorde terug op die webwerf te vertoon saam met die bestaande GitHub-gebaseerde Giscus-kommentaar.

## Kenmerke

* **Tweerigtingkommunikasie**: Webwerfkommentaar â†’ Discord, Discord-antwoorde â†’ Webwerf
* **Dubbele Kommentaarstelsel**: Beide Giscus (GitHub-gebaseerd) en Discord-kommentaar werk saam.
* **Ryk Discord-inbeddings**: Kommentaar verskyn as geformateerde inbeddings met volledige bladsykonteks.
* **Draadbestuur**: Outomatiese draadskepping vir georganiseerde antwoorde
* **Opdaterings in reÃ«le tyd**: Webwerf vertoon outomaties Discord-antwoorde
* **Volledige Bladsy Konteks**: Kommentaar sluit bladsytitel, URL en navigasiekonteks in
* **Gebruiker-avatars**: Discord-antwoorde wys gebruikers-avatars en gebruikersname.
* **Responsiewe Ontwerp**: Werk op beide rekenaar- en mobiele toestelle

## Opstelinstruksies

### 1. Skep 'n Discord-bot

1. Gaan na [Discord-ontwikkelaarportaal](https://discord.com/developers/applications)
2. Skep 'n nuwe toepassing
3. Gaan na die "Bot"-afdeling en skep 'n bot
4. Kopieer die bot-token
5. Onder "Bevoorregte Gateway-voornemens", aktiveer:
   * **Boodskapinhoud-intensie**
   * **Bedienerlede se voorneme** (opsioneel)

### 2) Konfigureer Bottoestemmings

Jou bot benodig hierdie toestemmings:

* Lees Boodskappe
* Stuur Boodskappe
* Skep openbare drade
* Stuur boodskappe in drade
* Lees Boodskapgeskiedenis
* Gebruik skuinsstreep-opdragte (opsioneel)

### 3. Nooi Bot na Bediener

1. Gaan na OAuth2 > URL-generator
2. Kies "bot"-omvang
3. Kies die toestemmings wat hierbo gelys word
4. Gebruik die gegenereerde URL om die bot na jou bediener uit te nooi

### 4) Konfigureer Omgewingsveranderlikes

#### Voorkant (.env)

```env
# Discord Bot Konfigurasie
DISCORD_BOT_TOKEN=jou_bot_token_hier
DISCORD_CHANNEL_ID=jou_kanaal_id_hier

# API Konfigurasie
REACT_APP_API_URL=http://localhost:3001

# Discord Konteks Konfigurasie
DISCORD_CONTEXT_LEVEL=vol
DISCORD_SHOW_BREADCRUMBS=waar
DISCORD_SHOW_SECTION_INFO=waar
DISCORD_SITE_NAME=Jou Werf Naam
```

#### Agterkantbediener (bediener/.env)

```env
# Discord Bot Konfigurasie
DISCORD_BOT_TOKEN=jou_bot_token_hier
DISCORD_CHANNEL_ID=jou_kanaal_id_hier

# API Konfigurasie
PORT=3001

# Discord Konteks Konfigurasie
DISCORD_CONTEXT_LEVEL=vol
DISCORD_SHOW_PAGE_CONTEXT=waar
DISCORD_SHOW_BREADCRUMBS=waar
DISCORD_SHOW_SECTION_INFO=waar
DISCORD_SHOW_PAGE_PATH=onwaar
DISCORD_SHOW_TIMESTAMP=waar
DISCORD_SHOW_AUTHOR_FIELD=waar
DISCORD_CREATE_THREADS=waar
DISCORD_THREAD_DURATION=1440
DISCORD_SITE_NAME=Jou webwerfnaam
```

:::waarskuwing Sekuriteitsnota

* Moet nooit `.env`-lÃªers aan weergawebeheer toewys nie
* Gebruik omgewingveranderlikes in produksie
* Hou jou bot-token veilig
  :::

### 5. Installeer bedienerafhanklikhede

```bash
cd-bediener
npm-installasie
```

### 6. Begin die Backend-bediener

```bash
# Ontwikkeling
npm run dev

# Produksie
npm begin
```

### 7. Implementeer Konfigurasie

Vir produksie-implementerings, stel omgewingveranderlikes in jou gasheerplatform:

* **Voorkant**: Stel `REACT_APP_API_URL` op jou produksie-API-URL
* **Agtergrond**: Implementeer die bedienermap met bot-token en kanaal-ID
* **Databasis**: SQLite-databasis sal outomaties geskep word
* **Konteks**: Konfigureer Discord-konteksvlak en -opsies volgens u voorkeure

## Hoe dit werk

### Volledige tweerigtingvloei

1. **Webwerfkommentaar**: Gebruiker dien kommentaar in via webwerfvorm
2. **Discord-boodskap**: Bot stuur geformateerde inbedding na Discord-kanaal met volledige bladsykonteks
3. **Draadskepping**: Bot skep outomaties 'n draad vir georganiseerde antwoorde
4. **Discord-antwoorde**: Discord-gebruikers antwoord in die draad of op die boodskap
5. **Databasisberging**: Bot stoor alle kommentaar en antwoorde in die SQLite-databasis
6. **Webwerf-vertoning**: Frontend-peilings-API elke 30 sekondes en vertoon Discord-antwoorde

### Discord-boodskapformaat

Discord-inbeddings sluit in:

* **Title**: "ğŸ’¬ New Comment: \{Page Title}"
* **Beskrywing**: Die werklike kommentaarinhoud
* **Outeur**: Die kommentator se naam
* **URL**: Klikbare skakel na die presiese bladsy
* **Bladsyveld**: Wys bladsytitel met klikbare skakel
* **Tydstempel**: Wanneer die kommentaar geplaas is
* **Draad**: Outomaties geskepte draad vir antwoorde

### Webwerf-vertoning

Die webwerf wys:

* **Oorspronklike kommentaar**: Webwerfvormvoorleggings
* **Discord-antwoorde**: Antwoorde van Discord-gebruikers met avatars en gebruikersname
* **Opdaterings in reÃ«le tyd**: Outomatiese peiling vir nuwe antwoorde
* **Gedraadde Gesprekke**: Georganiseerde kommentaar â†’ antwoordstruktuur

## Kontekskonfigurasie

### Konteksvlakke

Konfigureer hoeveel konteks in Discord-boodskappe verskyn:

#### `DISCORD_CONTEX_LEVEL=minimaal`

* **Vertonings**: Slegs bladsytitel en kommentaarinhoud
* **Gebruiksgeval**: Skoon, eenvoudige boodskappe sonder ekstra konteks

#### `DISCORD_CONTEX_LEVEL=basies`

* **Wys**: Bladsytitel, kommentaarinhoud en klikbare bladsy-URL
* **Gebruiksgeval**: Matige konteks met noodsaaklike inligting

#### `DISCORD_CONTEXT_LEVEL=vol` (standaard)

* **Wys**: Alle konteksinligting, insluitend broodkrummels, afdelings, tydstempels
* **Gebruiksgeval**: Maksimum konteks vir gedetailleerde besprekings

#### `DISCORD_CONTEX_LEVEL=aangepas`

* **Wys**: Slegs die kontekselemente wat jy individueel aktiveer
* **Gebruiksgeval**: Fyn ingestelde beheer oor wat verskyn

### Individuele kontekskontroles

Wanneer jy `DISCORD_CONTEXT_LEVEL=custom` gebruik, kan jy elke element beheer:

```env
DISCORD_SHOW_PAGE_CONTEXT=true # Wys bladsytitel en URL-veld
DISCORD_SHOW_BREADCRUMBS=true # Wys navigasie-broodkrummels
DISCORD_SHOW_SECTION_INFO=true # Wys hoofafdeling (Docker, Nextcloud, ens.)
DISCORD_SHOW_PAGE_PATH=false # Wys volledige URL-pad
DISCORD_SHOW_TIMESTAMP=true # Wys wanneer kommentaar geplaas is
DISCORD_SHOW_AUTHOR_FIELD=true # Wys kommentator se naam as inbed-outeur
```

### Draadkonfigurasie

```env
DISCORD_CREATE_THREADS=waar # Skep drade vir antwoorde
DISCORD_THREAD_DURATION=1440 # Draad outomaties argiveer tyd (minute)
DISCORD_SITE_NAME=Jou webwerfnaam # Werfnaam in voetskrif
```

### Voorbeeld Konteks Uitsette

**Minimale Konteks:**

```
Docker-installasiegids
"Hierdie tutoriaal was baie nuttig! Hoe hanteer ek poortkonflikte?"
```

**Basiese Konteks:**

```
ğŸ’¬ Docker Installasiegids
"Hierdie tutoriaal was baie nuttig! Hoe hanteer ek poortkonflikte?"
[Skakel na bladsy]
```

**Volle Konteks:**

```
ğŸ’¬ Nuwe Kommentaar: Docker Installasiegids
ğŸ‘¤ John Doe
"Hierdie tutoriaal was baie nuttig! Hoe hanteer ek poortkonflikte?"

ğŸ“„ Bladsy: Docker Installasiegids
ğŸ“ Navigasie: Docker > Dokumente > Docker installeer
ğŸ“‚ Afdeling: Docker
ğŸ”— Pad: /Docker/Dokumente/Installeer%20Docker/Docker%20Eengine

Jou webwerfnaam â€¢ Kommentaarstelsel
```

## Aanpassing

### Stylering

Die Discord-kommentaarkomponent gebruik CSS-modules. Jy kan die voorkoms aanpas deur te wysig:

```
src/komponente/DiscordKommentaar/style.module.css
```

### Boodskapformaat

Om die Discord-inbedformaat aan te pas, wysig die `discordMessage`-objek in:

```
src/komponente/DiscordComments/indeks.tsx
```

### Komponentplasing

Die Discord-kommentare verskyn standaard onder die Giscus-kommentare. Om dit te verander, wysig:

```
src/tema/DocItem/Uitleg/indeks.js
```

## Probleemoplossing

### Bot reageer nie

1. **Kontroleer bot-token**: Maak seker dat `DISCORD_BOT_TOKEN` korrek is
2. **Verifieer toestemmings**: Maak seker dat die bot die vereiste toestemmings in die kanaal het.
3. **Kontroleer kanaal-ID**: Maak seker dat `DISCORD_CHANNEL_ID` korrek is
4. **Bot in bediener**: Verifieer dat die bot werklik in jou Discord-bediener is

### Kommentaar verskyn nie

1. **Bediener loop**: Kontroleer of die agterkantbediener op die korrekte poort loop
2. **API URL**: Verifieer dat `REACT_APP_API_URL` na jou backend-bediener wys
3. **Databasis**: Kontroleer of die SQLite-databasis in die bedienermap geskep word
4. **CORS**: Maak seker dat CORS vir jou frontend-domein gekonfigureer is

### Discord-antwoorde word nie vertoon nie

1. **Boodskapinhoud-intensie**: Maak seker dat dit geaktiveer is in die Discord-ontwikkelaarportaal
2. **Bottoestemmings**: Verifieer dat die bot boodskappe in die kanaal kan lees
3. **Databasisverbinding**: Kontroleer bedienerlogboeke vir databasisfoute
4. **Peilings**: Voorste meningspeilings elke 30 sekondes - antwoorde kan 'n rukkie neem om te verskyn

### Omgewingsveranderlikes werk nie

* **Ontwikkeling**: Herbegin beide voor- en agterbedieners
* **Produksie**: Herontplooi beide die voor- en agterkant met korrekte omgewingveranderlikes
* **Voorvoegsel**: Gebruik die `REACT_APP_` voorvoegsel slegs vir frontend veranderlikes

### Databasisprobleme

1. **LÃªertoestemmings**: Verseker dat die bediener na die databasisgids kan skryf
2. **Skyfspasie**: Kontroleer beskikbare skyfspasie vir SQLite-databasis
3. **Bedienerlogboeke**: Kontroleer bedienerkonsole vir databasisverbindingsfoute

## Sekuriteitsoorwegings

* **Bot-teken**: Hou jou bot-teken geheim en moet dit nooit aan weergawebeheer toewy nie
* **Tempobeperking**: Discord het tempobeperkings vir bots (anders as webhooks)
* **Invoervalidering**: Beide voor- en agterkant valideer gebruikersinvoer
* **Databasissekuriteit**: SQLite-databasis moet beskerm word met behoorlike lÃªertoestemmings
* **API-sekuriteit**: Oorweeg die implementering van tempobeperking op jou API-eindpunte
* **CORS**: Konfigureer CORS behoorlik vir jou produksiedomein

## Argitektuur

```
Webwerf-voorkant â†â†’ Express API â†â†’ Discord Bot â†â†’ Discord-bediener
                    â†“
                SQLite-databasis
```

## LÃªerstruktuur

```
projek/
â”œâ”€â”€ src/komponente/DiscordComments/ # Voorkant-komponent
â”œâ”€â”€ bediener/ # Agterkant-bediener
â”‚ â”œâ”€â”€ api.js # Express API-bediener
â”‚ â”œâ”€â”€ discord-bot.js # Discord bot-logika
â”‚ â”œâ”€â”€ databasis.js # SQLite databasisfunksies
â”‚ â””â”€â”€ pakket.json # Bedienerafhanklikhede
â””â”€â”€ docs/Discord/Dokumente/ # Dokumentasie
```

## Blaaierondersteuning

Die Discord-kommentaarkomponent werk in alle moderne blaaiers wat die volgende ondersteun:

* ES6 haal API
* Reageer 18+
* CSS Grid en Flexbox
* Plaaslike berging (vir vormpersistensie)
