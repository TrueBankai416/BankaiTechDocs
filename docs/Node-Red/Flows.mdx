---
title: Flow Examples
last_update:
  author: BankaiTech
---
## Locks
```
[{"id":"52cc0e27836e3eeb","type":"tab","label":"Locks Example","disabled":false,"info":"","env":[]},{"id":"14d6796186525395","type":"server-state-changed","z":"52cc0e27836e3eeb","name":"Front Door Battery Alarm","server":"18bb22fb.3ce36d","version":6,"outputs":2,"exposeAsEntityConfig":"","entities":{"entity":["sensor.front_door_battery"],"substring":[],"regex":[]},"outputInitially":true,"stateType":"num","ifState":"25","ifStateType":"num","ifStateOperator":"gte","outputOnlyOnStateChange":true,"for":"0","forType":"num","forUnits":"minutes","ignorePrevStateNull":true,"ignorePrevStateUnknown":true,"ignorePrevStateUnavailable":true,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":170,"y":300,"wires":[[],["3a0abd647206c6a6"]]},{"id":"5c6bedad55873e29","type":"api-call-service","z":"52cc0e27836e3eeb","name":"Notify","server":"18bb22fb.3ce36d","version":7,"debugenabled":false,"action":"notify.notify","floorId":[],"areaId":[],"deviceId":[],"entityId":[],"labelId":[],"data":"{\"message\":\"Replace Batteries.\",\"title\":\"Front Door Alarm\"}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","blockInputOverrides":false,"domain":"notify","service":"notify","x":1170,"y":300,"wires":[[]]},{"id":"b28b607131a84483","type":"api-call-service","z":"52cc0e27836e3eeb","name":"Alert","server":"18bb22fb.3ce36d","version":7,"debugenabled":false,"action":"notify.alexa_media_carrigan_s_echo_show","floorId":[],"areaId":[],"deviceId":[],"entityId":[],"labelId":[],"data":"{\"message\":\"{{payload}}\",\"target\":\"media_player.carrigan_s_echo_show\"}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","blockInputOverrides":false,"domain":"notify","service":"alexa_media_carrigan_s_echo_show","output_location":"","output_location_type":"none","x":1030,"y":300,"wires":[["5c6bedad55873e29"]]},{"id":"dc4a7e249144f84d","type":"function","z":"52cc0e27836e3eeb","name":"Check Door Status","func":"let doorId = msg.data.entity_id;let state = msg.data.new_state.state;let message = doorId + ' is ' + state + '% ';return { payload: message, data: state };","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":650,"y":300,"wires":[["6e31409159d76410"]]},{"id":"3a0abd647206c6a6","type":"change","z":"52cc0e27836e3eeb","name":"Data rewrite","rules":[{"t":"set","p":"data.entity_id","pt":"msg","to":"Front Door Battery","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":410,"y":300,"wires":[["dc4a7e249144f84d"]]},{"id":"dae2353b5c0bfa9c","type":"switch","z":"52cc0e27836e3eeb","name":"Who Arrived?","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"entity.id_1","vt":"str"},{"t":"eq","v":"entity.id_2","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":360,"y":160,"wires":[["64b3cb1b405708f0"],["2b058c778e3b1123"]]},{"id":"d3888c4e09ee3344","type":"server-state-changed","z":"52cc0e27836e3eeb","name":"","server":"18bb22fb.3ce36d","version":6,"outputs":2,"exposeAsEntityConfig":"","entities":{"entity":[],"substring":[],"regex":[]},"outputInitially":false,"stateType":"str","ifState":"Home","ifStateType":"str","ifStateOperator":"is","outputOnlyOnStateChange":true,"for":"0","forType":"num","forUnits":"minutes","ignorePrevStateNull":true,"ignorePrevStateUnknown":true,"ignorePrevStateUnavailable":true,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":140,"y":180,"wires":[["dae2353b5c0bfa9c"],[]]},{"id":"6c5febd3855127d0","type":"server-state-changed","z":"52cc0e27836e3eeb","name":"","server":"18bb22fb.3ce36d","version":6,"outputs":2,"exposeAsEntityConfig":"","entities":{"entity":[],"substring":[],"regex":[]},"outputInitially":false,"stateType":"str","ifState":"Home","ifStateType":"str","ifStateOperator":"is","outputOnlyOnStateChange":true,"for":"0","forType":"num","forUnits":"minutes","ignorePrevStateNull":true,"ignorePrevStateUnknown":true,"ignorePrevStateUnavailable":true,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":140,"y":120,"wires":[["dae2353b5c0bfa9c"],[]]},{"id":"2b058c778e3b1123","type":"api-call-service","z":"52cc0e27836e3eeb","name":"Notify User1","server":"18bb22fb.3ce36d","version":7,"debugenabled":false,"action":"","floorId":[],"areaId":[],"deviceId":[],"entityId":[],"labelId":[],"data":"{\"message\":\"User2 has arrived home.\",\"title\":\"Front Door Unlocked\"}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","blockInputOverrides":false,"domain":"notify","service":"mobile_app_sm_g998u1","x":570,"y":200,"wires":[["6359c673d1aafb56"]]},{"id":"64b3cb1b405708f0","type":"api-call-service","z":"52cc0e27836e3eeb","name":"Notify User2","server":"18bb22fb.3ce36d","version":7,"debugenabled":false,"action":"","floorId":[],"areaId":[],"deviceId":[],"entityId":[],"labelId":[],"data":"{\"message\":\"User1 has arrived home.\",\"title\":\"Front Door Unlocked\"}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","blockInputOverrides":false,"domain":"notify","service":"mobile_app_sm_g996u","x":570,"y":100,"wires":[["6359c673d1aafb56"]]},{"id":"8064a4b3583b4932","type":"api-call-service","z":"52cc0e27836e3eeb","name":"Unlock","server":"18bb22fb.3ce36d","version":7,"debugenabled":false,"action":"lock.unlock","floorId":[],"areaId":[],"deviceId":["93cfa403a46efe22de4dd3234760889f"],"entityId":["lock.front_door"],"labelId":[],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","blockInputOverrides":false,"domain":"lock","service":"unlock","x":1290,"y":160,"wires":[[]]},{"id":"5671f2805726caf0","type":"api-call-service","z":"52cc0e27836e3eeb","name":"Alert","server":"18bb22fb.3ce36d","version":7,"debugenabled":false,"action":"notify.alexa_media","floorId":[],"areaId":[],"deviceId":[],"entityId":[],"labelId":[],"data":"{\"message\":\"{{topic}} has arrived home\",\"target\":\"media_player.carrigan_s_echo_show\"}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","blockInputOverrides":false,"domain":"notify","service":"alexa_media","output_location":"","output_location_type":"none","x":1130,"y":160,"wires":[["8064a4b3583b4932"]]},{"id":"ee597df4b6255bc4","type":"api-call-service","z":"52cc0e27836e3eeb","name":"Set volume 50%","server":"18bb22fb.3ce36d","version":7,"debugenabled":false,"action":"media_player.volume_set","floorId":[],"areaId":[],"deviceId":[],"entityId":[],"labelId":[],"data":"{\"volume_level\":0.5}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","blockInputOverrides":false,"domain":"media_player","service":"volume_set","output_location":"","output_location_type":"none","x":960,"y":160,"wires":[["5671f2805726caf0"]]},{"id":"6359c673d1aafb56","type":"change","z":"52cc0e27836e3eeb","name":"rewrite data","rules":[{"t":"change","p":"topic","pt":"msg","from":"","fromt":"str","to":"User2","tot":"str"},{"t":"change","p":"topic","pt":"msg","from":"","fromt":"str","to":"User1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":160,"wires":[["ee597df4b6255bc4"]]},{"id":"d60fc8ee0bbbc449","type":"comment","z":"52cc0e27836e3eeb","name":"Monitors Location","info":"","x":150,"y":80,"wires":[]},{"id":"02f9d4e129af65c2","type":"comment","z":"52cc0e27836e3eeb","name":"Who arrived","info":"","x":350,"y":120,"wires":[]},{"id":"11ceabbc41b866bb","type":"comment","z":"52cc0e27836e3eeb","name":"Push to mobile app","info":"","x":570,"y":160,"wires":[]},{"id":"7805c37f824d254d","type":"comment","z":"52cc0e27836e3eeb","name":"Make message readable","info":"","x":790,"y":100,"wires":[]},{"id":"e788a7c27f24c6c3","type":"comment","z":"52cc0e27836e3eeb","name":"Alexa announces who arrived","info":"","x":1040,"y":100,"wires":[]},{"id":"f5a9462389fdf267","type":"comment","z":"52cc0e27836e3eeb","name":"Unlock Front Door","info":"","x":1310,"y":100,"wires":[]},{"id":"21b9833a8f93498b","type":"comment","z":"52cc0e27836e3eeb","name":"Make message readable","info":"","x":430,"y":260,"wires":[]},{"id":"6e31409159d76410","type":"api-call-service","z":"52cc0e27836e3eeb","name":"Set volume 50%","server":"18bb22fb.3ce36d","version":7,"debugenabled":false,"action":"media_player.volume_set","floorId":[],"areaId":[],"deviceId":[],"entityId":["media_player.carrigan_s_echo_show"],"labelId":[],"data":"{\"volume_level\":0.5}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","blockInputOverrides":false,"domain":"media_player","service":"volume_set","output_location":"","output_location_type":"none","x":860,"y":300,"wires":[["b28b607131a84483"]]},{"id":"008968b96a023490","type":"comment","z":"52cc0e27836e3eeb","name":"Alexa announces Alarm","info":"","x":960,"y":260,"wires":[]},{"id":"765d4930dafc9810","type":"comment","z":"52cc0e27836e3eeb","name":"Push notify all Phones","info":"","x":1220,"y":260,"wires":[]},{"id":"bf70d04aaeccc6cf","type":"comment","z":"52cc0e27836e3eeb","name":"Processes Data","info":"","x":640,"y":260,"wires":[]},{"id":"67e67e4e1c783dd9","type":"comment","z":"52cc0e27836e3eeb","name":"Monitors Battery level","info":"","x":160,"y":260,"wires":[]},{"id":"039135c841770de4","type":"server-state-changed","z":"52cc0e27836e3eeb","name":"Front Door Error","server":"18bb22fb.3ce36d","version":6,"outputs":2,"exposeAsEntityConfig":"","entities":{"entity":["lock.front_door"],"substring":[],"regex":[]},"outputInitially":false,"stateType":"str","ifState":"jammed","ifStateType":"str","ifStateOperator":"is","outputOnlyOnStateChange":true,"for":"0","forType":"num","forUnits":"minutes","ignorePrevStateNull":true,"ignorePrevStateUnknown":true,"ignorePrevStateUnavailable":true,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":140,"y":380,"wires":[["43f7b3030aa98f43"],[]]},{"id":"43f7b3030aa98f43","type":"api-call-service","z":"52cc0e27836e3eeb","name":"Notify","server":"18bb22fb.3ce36d","version":7,"debugenabled":false,"action":"notify.notify","floorId":[],"areaId":[],"deviceId":[],"entityId":[],"labelId":[],"data":"{\"message\":\"Front Door is Jammed.\",\"title\":\"Door Error\"}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","blockInputOverrides":false,"domain":"notify","service":"notify","x":338.2916564941406,"y":379.3437805175781,"wires":[["b5dd217373a22d45"]]},{"id":"6740bca4594cec79","type":"server-state-changed","z":"52cc0e27836e3eeb","name":"Back Door Error","server":"18bb22fb.3ce36d","version":6,"outputs":2,"exposeAsEntityConfig":"","entities":{"entity":["lock.back_door"],"substring":[],"regex":[]},"outputInitially":false,"stateType":"str","ifState":"jammed","ifStateType":"str","ifStateOperator":"is","outputOnlyOnStateChange":true,"for":"0","forType":"num","forUnits":"minutes","ignorePrevStateNull":true,"ignorePrevStateUnknown":true,"ignorePrevStateUnavailable":true,"ignoreCurrentStateUnknown":true,"ignoreCurrentStateUnavailable":true,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"eventData"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":140,"y":440,"wires":[["bb212a7dd1648e61"],[]]},{"id":"bb212a7dd1648e61","type":"api-call-service","z":"52cc0e27836e3eeb","name":"Notify","server":"18bb22fb.3ce36d","version":7,"debugenabled":false,"action":"notify.notify","floorId":[],"areaId":[],"deviceId":[],"entityId":[],"labelId":[],"data":"{\"message\":\"Back Door is Jammed.\",\"title\":\"Door Error\"}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","blockInputOverrides":false,"domain":"notify","service":"notify","x":338.2916564941406,"y":439.3437805175781,"wires":[["f84c983f66de042f"]]},{"id":"b86cd838c6bcd816","type":"api-call-service","z":"52cc0e27836e3eeb","name":"Alert","server":"18bb22fb.3ce36d","version":7,"debugenabled":false,"action":"notify.alexa_media_carrigan_s_echo_show","floorId":[],"areaId":[],"deviceId":[],"entityId":[],"labelId":[],"data":"{\"message\":\"Front Door is {{payload}}\",\"target\":\"media_player.carrigan_s_echo_show\"}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","blockInputOverrides":false,"domain":"notify","service":"alexa_media_carrigan_s_echo_show","output_location":"","output_location_type":"none","x":710,"y":380,"wires":[[]]},{"id":"b5dd217373a22d45","type":"api-call-service","z":"52cc0e27836e3eeb","name":"Set volume 50%","server":"18bb22fb.3ce36d","version":7,"debugenabled":false,"action":"media_player.volume_set","floorId":[],"areaId":[],"deviceId":[],"entityId":["media_player.carrigan_s_echo_show"],"labelId":[],"data":"{\"volume_level\":0.5}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","blockInputOverrides":false,"domain":"media_player","service":"volume_set","output_location":"","output_location_type":"none","x":520,"y":380,"wires":[["b86cd838c6bcd816"]]},{"id":"32281a2e170bdeab","type":"api-call-service","z":"52cc0e27836e3eeb","name":"Alert","server":"18bb22fb.3ce36d","version":7,"debugenabled":false,"action":"notify.alexa_media_carrigan_s_echo_show","floorId":[],"areaId":[],"deviceId":[],"entityId":[],"labelId":[],"data":"{\"message\":\"Back Door is {{payload}}\",\"target\":\"media_player.carrigan_s_echo_show\"}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","blockInputOverrides":false,"domain":"notify","service":"alexa_media_carrigan_s_echo_show","output_location":"","output_location_type":"none","x":710,"y":440,"wires":[[]]},{"id":"f84c983f66de042f","type":"api-call-service","z":"52cc0e27836e3eeb","name":"Set volume 50%","server":"18bb22fb.3ce36d","version":7,"debugenabled":false,"action":"media_player.volume_set","floorId":[],"areaId":[],"deviceId":[],"entityId":["media_player.carrigan_s_echo_show"],"labelId":[],"data":"{\"volume_level\":0.5}","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","blockInputOverrides":false,"domain":"media_player","service":"volume_set","output_location":"","output_location_type":"none","x":520,"y":440,"wires":[["32281a2e170bdeab"]]},{"id":"3c13b848af5fbb6a","type":"poll-state","z":"52cc0e27836e3eeb","name":"","server":"18bb22fb.3ce36d","version":3,"exposeAsEntityConfig":"","updateInterval":"5","updateIntervalType":"num","updateIntervalUnits":"minutes","outputInitially":false,"outputOnChanged":false,"entityId":"lock.back_door","stateType":"str","ifState":"jammed","ifStateType":"str","ifStateOperator":"is","outputs":2,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":170,"y":520,"wires":[["cdfa0573d5b8039f"],[]]},{"id":"5fcdfb5c884ff378","type":"poll-state","z":"52cc0e27836e3eeb","name":"","server":"18bb22fb.3ce36d","version":3,"exposeAsEntityConfig":"","updateInterval":"5","updateIntervalType":"num","updateIntervalUnits":"minutes","outputInitially":false,"outputOnChanged":false,"entityId":"lock.front_door","stateType":"str","ifState":"jammed","ifStateType":"str","ifStateOperator":"is","outputs":2,"outputProperties":[{"property":"payload","propertyType":"msg","value":"","valueType":"entityState"},{"property":"data","propertyType":"msg","value":"","valueType":"entity"},{"property":"topic","propertyType":"msg","value":"","valueType":"triggerId"}],"x":170,"y":580,"wires":[["2fcea9b337ec9ba7"],[]]},{"id":"2fcea9b337ec9ba7","type":"api-call-service","z":"52cc0e27836e3eeb","name":"Lock","server":"18bb22fb.3ce36d","version":7,"debugenabled":false,"action":"lock.lock","floorId":[],"areaId":[],"deviceId":["93cfa403a46efe22de4dd3234760889f"],"entityId":["lock.front_door"],"labelId":[],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","blockInputOverrides":false,"domain":"lock","service":"lock","x":390,"y":580,"wires":[[]]},{"id":"cdfa0573d5b8039f","type":"api-call-service","z":"52cc0e27836e3eeb","name":"Lock","server":"18bb22fb.3ce36d","version":7,"debugenabled":false,"action":"lock.lock","floorId":[],"areaId":[],"deviceId":["80084012f2fb0ea57f07fe0ef2256105"],"entityId":["lock.back_door"],"labelId":[],"data":"","dataType":"json","mergeContext":"","mustacheAltTags":false,"outputProperties":[],"queue":"none","blockInputOverrides":false,"domain":"lock","service":"lock","x":390,"y":520,"wires":[[]]},{"id":"18bb22fb.3ce36d","type":"server","name":"Home Assistant","addon":true,"rejectUnauthorizedCerts":true,"ha_boolean":"","connectionDelay":false,"cacheJson":true,"heartbeat":false,"heartbeatInterval":"","areaSelector":"friendlyName","deviceSelector":"friendlyName","entitySelector":"friendlyName","statusSeparator":"","enableGlobalContextStore":true}]
```
[!["Buy Me A Coffee"](https://www.buymeacoffee.com/assets/img/custom_images/orange_img.png)](https://www.buymeacoffee.com/BankaiTech)
